#include QMK_KEYBOARD_H
#include "unicode.h"

enum my_layers {
  _BASE,
  _HIRA,
  _GERM
};

#define HIRA MO(_HIRA)
#define GERM MO(_GERM)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  /* Keymap BASE: (Base Layer) Default Layer
   * ,-------------------------------------------------------.     ,-------------------.
   * |Esc| F1| F2| F3| F4| | F5| F6| F7| F8| | F9|F10|F11|F12|     |Ins |Home|PgUp|PrSc|
   * `-------------------------------------------------------'     |-------------------|
   *                                                               |Del |End |PgDn|ScrL|
   * ,-----------------------------------------------------------. |-------------------|
   * | ~ | 1 |  2|  3|  4|  5|  6|  7|  8|  9|  0|  -|  =|Backsp | |NumL| /  | *  |Paus|
   * |-----------------------------------------------------------| |-------------------|
   * |Tab  |  Q|  W|  E|  R|  T|  Y|  U|  I|  O|  P|  [|  ]|  \  | | 7  | 8  | 9  | -  |
   * |-----------------------------------------------------------| |-------------------|
   * |CAPS   |  A|  S|  D|  F|  G|  H|  J|  K|  L|  ;|  '|Return | | 4  | 5  | 6  | +  |
   * |-----------------------------------------------------------' |-------------------|
   * |Shift   |  Z|  X|  C|  V|  B|  N|  M|  ,|  .|  /|Shift  | Up | 1  | 2  | 3  | Ent|
   * |--------------------------------------------------------'----`--------------|    |
   * |Ctrl|Gui |Alt |      Space           |Alt |Fn |Ctr|Left |Down|Rght| 0  | .  |    |
   * `---------------------------------------------------------------------------------'
   */
  [_BASE] = LAYOUT(
  //......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., .......,
    KC_ESC,  KC_F1,   KC_F2,   KC_F3,   KC_F4,   KC_F5,   KC_F6,   KC_F7,   KC_F8,   KC_F9,   KC_F10,  KC_F11,  KC_F12,                    KC_INS,  KC_HOME, KC_PGUP, KC_PSCR,
                                                                                                                                           KC_DEL,  KC_END,  KC_PGDN, KC_SLCK,
    KC_GRV,  KC_1,    KC_2,    KC_3,    KC_4,    KC_5,    KC_6,    KC_7,    KC_8,    KC_9,    KC_0,    KC_MINS, KC_EQL,  KC_BSPC, KC_NO,   KC_NLCK, KC_PSLS, KC_PAST, KC_PAUS,
    KC_TAB,  KC_Q,    KC_W,    KC_E,    KC_R,    KC_T,    KC_Y,    KC_U,    KC_I,    KC_O,    KC_P,    KC_LBRC, KC_RBRC, KC_BSLS,          KC_P7,   KC_P8,   KC_P9,   KC_PMNS,
    KC_CAPS, KC_A,    KC_S,    KC_D,    KC_F,    KC_G,    KC_H,    KC_J,    KC_K,    KC_L,    KC_SCLN, KC_QUOT, KC_NO,   KC_ENT,           KC_P4,   KC_P5,   KC_P6,   KC_PPLS,
    KC_LSFT, KC_NO,   KC_Z,    KC_X,    KC_C,    KC_V,    KC_B,    KC_N,    KC_M,    KC_COMM, KC_DOT,  KC_SLSH, KC_RSFT,          KC_UP,   KC_P1,   KC_P2,   KC_P3,   KC_NO,
    KC_LCTL, KC_LGUI, KC_LALT,                            KC_SPC,                    GERM,    GERM,    HIRA,             KC_LEFT, KC_DOWN, KC_RGHT, KC_P0,   KC_PDOT, KC_PENT),

  [_HIRA] = LAYOUT(
  //......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., .......,
    _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,                   _______, _______, _______, _______,
                                                                                                                                           _______, _______, _______, _______,
    X(JRO),  X(JNU),  X(JHU),  X(JA),   X(JU),   X(JE),   X(JO),   X(JYA),  X(JYU),  X(JYO),  X(JWA),  X(JHO),  X(JHE),  _______, _______, _______, _______, _______, _______,
    _______, X(JTA),  X(JTE),  X(JI),   X(JSU),  X(JKA),  X(JN),   X(JNA),  X(JNI),  X(JRA),  X(JSE),  X(JVV),  X(JSV),  X(JMU),           _______, _______, _______, _______,
    _______, X(JTI),  X(JTO),  X(JSI),  X(JHA),  X(JKI),  X(JKU),  X(JMA),  X(JNO),  X(JRI),  X(JRE),  X(JKE),  _______, _______,          _______, _______, _______, _______,
    _______, _______, X(JTU),  X(JSA),  X(JSO),  X(JHI),  X(JKO),  X(JMI),  X(JMO),  X(JNE),  X(JRU),  X(JME),  _______,          _______, _______, _______, _______, _______,
    _______, _______, _______,                            _______,                   _______, _______, _______,          _______, _______, _______, _______, _______, _______),

  [_GERM] = LAYOUT(
  //......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., ......., .......,
    _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,                   _______, _______, _______, _______,
                                                                                                                                           _______, _______, _______, _______,
    _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,
    _______, _______, _______, GE_EE,   _______, _______, _______, GE_UE,   _______, GE_OE,   _______, _______, _______, _______,          _______, _______, _______, _______,
    _______, GE_AE,   GE_SS,   _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,          _______, _______, _______, _______,
    _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,          _______, _______, _______, _______, _______,
    _______, _______, _______,                            _______,                   _______, _______, _______,          _______, _______, _______, _______, _______, _______)

};

void matrix_init_user(void) {
  // use wincompose for unicode input
  set_unicode_input_mode(UC_WINC);
}
